{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["// CLI\nimport {run, settings, flush} from '@oclif/core'\nimport Bugsnag from '@bugsnag/js'\nimport {error as kitError, environment} from '@shopify/cli-kit'\n\nfunction runCLI() {\n  if (environment.local.isDebug()) {\n    settings.debug = true\n  } else {\n    Bugsnag.start({apiKey: '9e1e6889176fd0c795d5c659225e0fae', logger: null})\n  }\n\n  run(undefined, import.meta.url)\n    .then(flush)\n    .catch((error: Error): Promise<void | Error> => {\n      const bugsnagHandle = async (errorToReport: Error): Promise<Error> => {\n        if (!settings.debug) {\n          await new Promise((resolve, reject) => {\n            Bugsnag.notify(errorToReport, undefined, resolve)\n          })\n        }\n        return Promise.resolve(errorToReport)\n      }\n      const kitMapper = kitError.mapper\n      const kitHandle = kitError.handler\n      // eslint-disable-next-line promise/no-nesting\n      return kitMapper(error)\n        .then(bugsnagHandle)\n        .then((error: Error) => {\n          kitHandle(error)\n        })\n    })\n}\n\nexport default runCLI\n"],"names":["error","kitError"],"mappings":";;;;AAGA,SAAS,MAAM,GAAG;AAClB,EAAE,IAAI,WAAW,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;AACnC,IAAI,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC;AAC1B,GAAG,MAAM;AACT,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,kCAAkC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;AAChF,GAAG;AACH,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAACA,OAAK,KAAK;AAC5D,IAAI,MAAM,aAAa,GAAG,OAAO,aAAa,KAAK;AACnD,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;AAC3B,QAAQ,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;AAC/C,UAAU,OAAO,CAAC,MAAM,CAAC,aAAa,EAAE,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;AACzD,SAAS,CAAC,CAAC;AACX,OAAO;AACP,MAAM,OAAO,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;AAC5C,KAAK,CAAC;AACN,IAAI,MAAM,SAAS,GAAGC,KAAQ,CAAC,MAAM,CAAC;AACtC,IAAI,MAAM,SAAS,GAAGA,KAAQ,CAAC,OAAO,CAAC;AACvC,IAAI,OAAO,SAAS,CAACD,OAAK,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK;AACjE,MAAM,SAAS,CAAC,MAAM,CAAC,CAAC;AACxB,KAAK,CAAC,CAAC;AACP,GAAG,CAAC,CAAC;AACL;;;;"}