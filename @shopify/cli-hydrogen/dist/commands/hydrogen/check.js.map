{"version":3,"file":"check.js","sources":["../../../src/cli/commands/hydrogen/add/hydrogen/hydrogen.ts","../../../src/cli/commands/hydrogen/check/rules/hydrogen/checkHydrogenVersion.ts","../../../src/cli/commands/hydrogen/check/rules/node/checkNodeVersion.ts","../../../src/cli/commands/hydrogen/add/eslint/eslint.ts","../../../src/cli/commands/hydrogen/check/rules/eslint/checkEslintConfig.ts","../../../src/cli/commands/hydrogen/check.ts"],"sourcesContent":["import Command from '../../../../core/Command'\n\nexport async function addHydrogen(this: Command) {\n  this.package.install('@shopify/hydrogen')\n}\n","import {CheckResult} from '../../../../../types'\nimport addHydrogen from '../../../add/hydrogen'\nimport Command from '../../../../../core/Command'\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport hydrogenPkg from '../../../../../../../package.json'\nimport semver from 'semver'\n\nexport const HYDROGEN_MIN_VERSION = hydrogenPkg.version\n\nexport async function checkHydrogenVersion(this: Command): Promise<CheckResult[]> {\n  const h2Version = await this.package.hasDependency('@shopify/hydrogen')\n  const normalizedVersion = h2Version ? semver.coerce(h2Version)?.version : `@shopify/hydrogen not installed`\n  const latestHydrogen =\n    typeof h2Version === 'string' &&\n    typeof normalizedVersion === 'string' &&\n    semver.gte(normalizedVersion, HYDROGEN_MIN_VERSION)\n\n  const success = h2Version === 'latest' || latestHydrogen\n\n  const description = `Has latest hydrogen version (latest: ${HYDROGEN_MIN_VERSION} / found ${normalizedVersion})`\n\n  return [\n    {\n      id: 'hydrogen-latest',\n      type: 'Dependencies',\n      description,\n      success,\n      fix: addHydrogen,\n    },\n  ]\n}\n","import {CheckResult} from '../../../../../types'\nimport Command from '../../../../../core/Command'\nimport semver from 'semver'\n\nconst NODE_MIN_VERSION = '>=12.0.0'\n\nexport async function checkNodeVersion(this: Command): Promise<CheckResult[]> {\n  const nodeVersion = await this.package.nodeVersion()\n  const normalizedVersion = semver.coerce(nodeVersion)?.version\n\n  return [\n    {\n      id: 'node-version',\n      type: 'Dependencies',\n      description: 'Has min node version',\n      success:\n        !nodeVersion || (normalizedVersion !== undefined && semver.satisfies(normalizedVersion, NODE_MIN_VERSION)),\n      link: 'https://shopify.dev/custom-storefronts/hydrogen/support',\n    },\n  ]\n}\n","import Command from '../../../../core/Command'\n\nexport async function addEslint(this: Command) {\n  const {fs} = this\n\n  await fs.write('.eslintrc.js', (await import('./templates/eslintrc-js')).default())\n  this.package.install('eslint', {dev: true, version: '^7.31.0'})\n  this.package.install('eslint-plugin-hydrogen', {\n    dev: true,\n    version: '^0.6.2',\n  })\n}\n","import {CheckResult} from '../../../../../types'\nimport addEslint from '../../../add/eslint'\nimport Command from '../../../../../core/Command'\n\nexport async function checkEslintConfig(this: Command): Promise<CheckResult[]> {\n  const eslintConfig = await this.workspace.loadConfig<{extends: string[]}>('eslint')\n\n  const hasEslintConfig = Boolean(eslintConfig)\n\n  const hasHydrogenConfig =\n    hasEslintConfig &&\n    Boolean(eslintConfig.config.extends?.filter((extended: string) => extended.includes('plugin:hydrogen')).length)\n\n  const hasHydrogenEslintPackage = Boolean(await this.package.hasDependency('eslint-plugin-hydrogen'))\n\n  return [\n    {\n      id: 'eslint-config',\n      type: 'Setup',\n      description: 'Has eslint config',\n      success: hasEslintConfig,\n      link: 'https://shopify.dev/custom-storefronts/hydrogen/lint',\n      fix: addEslint,\n    },\n    {\n      id: 'eslint-config-hydrogen',\n      type: 'Setup',\n      description: 'Has hydrogen eslint config',\n      success: hasHydrogenConfig && hasHydrogenEslintPackage,\n      link: 'https://shopify.dev/custom-storefronts/hydrogen/lint',\n      fix: addEslint,\n    },\n  ]\n}\n","// import type {Env} from 'types';\nimport {checkHydrogenVersion, checkEslintConfig, checkNodeVersion} from './check/rules'\nimport {HelpfulError} from '../../utilities'\n\nimport {CheckResult} from '../../types'\nimport Command from '../../core/Command'\nimport chalk from 'chalk'\nimport {output} from '@shopify/cli-kit'\n\nexport default class Check extends Command {\n  static description = 'Check a hydrogen app for common problems.'\n\n  static examples = [`$ shopify hydrogen check`]\n\n  static flags = {\n    ...Command.flags,\n  }\n\n  static args = []\n\n  async run(): Promise<void> {\n    this.interface.say('Running checks...')\n\n    let results\n\n    try {\n      results = [\n        ...(await checkNodeVersion.call(this)),\n        ...(await checkHydrogenVersion.call(this)),\n        ...(await checkEslintConfig.call(this)),\n      ]\n    } catch (error) {\n      throw new HelpfulError({title: 'Error running checks'})\n    }\n\n    displayCheckResults.call(this, results)\n\n    const failedChecks = results.filter(({success}) => !success)\n\n    if (failedChecks.length) {\n      this.interface.say(\n        `${chalk.red.bold(`• ${failedChecks.length} errors `)}${chalk.dim(`found in ${results.length} checks`)}`,\n      )\n    } else {\n      this.interface.say(`${chalk.green.bold(`• No errors `)}${chalk.dim(`found in ${results.length} checks`)}`)\n    }\n\n    await fixChecks.call(this, results)\n    output.newline()\n  }\n}\n\nfunction displayCheckResults(this: Command, allCheckResults: CheckResult[]) {\n  const indent = '          '\n  const checksBySection = allCheckResults.reduce((acc, {type, ...rest}) => {\n    if (!acc[type]) {\n      acc[type] = []\n    }\n    acc[type].push({type, ...rest})\n    return acc\n  }, {} as {[key: string]: CheckResult[]})\n\n  ;[...Object.entries(checksBySection)].forEach(([section, sectionResults]) => {\n    const allChecksStatusEmoji = statusEmoji(sectionResults.every(({success}) => success))\n\n    output.newline()\n    this.interface.say(`${allChecksStatusEmoji} ${chalk.cyan.bold.underline(section)}`)\n    output.newline()\n\n    sectionResults.forEach(({description, link, success, fix, id}) => {\n      const docsLink = link ? chalk.dim(`${indent}${link}\\n`) : ''\n      const idText = id ? chalk.dim(id) : ''\n      const fixedText = success ? '' : statusFixable(fix)\n      const lines = [[statusEmoji(success), description, idText, fixedText].join(' '), docsLink]\n\n      this.interface.say(lines.join('\\n'))\n    })\n  })\n  output.newline()\n}\n\nasync function fixChecks(this: Command, results: CheckResult[]) {\n  let changedFiles = new Map()\n\n  const allFixableResults: CheckResult[] = results.filter(\n    ({fix, success}) => !success && fix !== undefined && typeof fix === 'function',\n  )\n\n  if (allFixableResults.length === 0) {\n    this.interface.say(`No fixable checks`)\n\n    return\n  }\n\n  output.newline()\n  output.newline()\n  await this.interface.say(`${allFixableResults.length} failed checks might be automatically fixable.`)\n  output.newline()\n  const wantsFix = await this.interface.ask(\n    `Do you want to apply automatic fixes to ${allFixableResults.length} failed checks?`,\n    {boolean: true, name: 'fix', default: false},\n  )\n\n  if (!wantsFix) {\n    return\n  }\n\n  for await (const {description, files} of runFixers(allFixableResults as Required<CheckResult>[], {\n    fs: this.fs,\n    package: this.package,\n    interface: this.interface,\n  })) {\n    this.interface.say([statusEmoji(true), description, chalk.green('fixed')].join(' '))\n\n    changedFiles = new Map([...changedFiles, ...files])\n  }\n\n  const cleanUpPromises = Array.from(changedFiles).map(async ([path, content]) => {\n    const action = (await this.fs.hasFile(path)) ? chalk.red(`{red overwrote`) : chalk.green(`{green wrote}`)\n\n    await this.fs.write(path, content)\n\n    this.interface.say(`${action}${stripPath(path)}`)\n  })\n\n  await Promise.all(cleanUpPromises)\n}\n\nasync function* runFixers(allFixableResults: Required<CheckResult>[], context: any) {\n  for (const {fix, description} of allFixableResults) {\n    try {\n      // eslint-disable-next-line no-await-in-loop\n      await fix(context)\n    } finally {\n      yield {description, files: []}\n    }\n  }\n}\n\nfunction statusEmoji(success: boolean) {\n  return success ? '✓' : `✕`\n}\n\nfunction statusFixable(fix: CheckResult['fix']) {\n  return typeof fix === 'function' ? chalk.cyan(` (fixable) `) : ' '\n}\n\nfunction stripPath(path: string) {\n  return path.replace(`${process.cwd()}`, '')\n}\n"],"names":["hydrogenPkg","chalk"],"mappings":"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"}